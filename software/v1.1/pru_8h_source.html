<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>RocketLogger: pru.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RocketLogger
   &#160;<span id="projectnumber">1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('pru_8h_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">pru.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="pru_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#ifndef PRU_H_</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#define PRU_H_</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;pruss_intc_mapping.h&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;prussdrv.h&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;sys/ipc.h&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;sys/mman.h&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;sys/select.h&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;sys/shm.h&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;termios.h&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ambient_8h.html">ambient.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="calibration_8h.html">calibration.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="file__handling_8h.html">file_handling.h</a>&quot;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">log.h</a>&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="meter_8h.html">meter.h</a>&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sem_8h.html">sem.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="types_8h.html">types.h</a>&quot;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="util_8h.html">util.h</a>&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="web_8h.html">web.h</a>&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// ------  ADC DEFINITIONS  ------ //</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="pru_8h.html#a5edeeb916b04a7f5430e95b0a2801b6e">   71</a></span>&#160;<span class="preprocessor">#define WAKEUP 0x02000000</span></div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="pru_8h.html#a42d8551dd3f10de6540de8a6fdf05a37">   72</a></span>&#160;<span class="preprocessor">#define STANDBY 0x04000000</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="pru_8h.html#ab702106cf3b3e96750b6845ded4e0299">   73</a></span>&#160;<span class="preprocessor">#define RESET 0x06000000</span></div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="pru_8h.html#a3018c7600b7bb9866400596a56a57af7">   74</a></span>&#160;<span class="preprocessor">#define START 0x08000000</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="pru_8h.html#ae19b6bb2940d2fbe0a79852b070eeafd">   75</a></span>&#160;<span class="preprocessor">#define STOP 0x0A000000</span></div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="pru_8h.html#a0a87a04e403f6537d1b7b4f22d115a83">   76</a></span>&#160;<span class="preprocessor">#define OFFSETCAL 0x1A000000</span></div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="pru_8h.html#aae10ea86a4b725e7fe6149829a9a0004">   77</a></span>&#160;<span class="preprocessor">#define RDATAC 0x10000000</span></div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="pru_8h.html#a993739431380c1beb0e04a8826c1b7e3">   78</a></span>&#160;<span class="preprocessor">#define SDATAC 0x11000000</span></div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="pru_8h.html#ac44cbcdd450c41da61bbbffe2cc49e01">   79</a></span>&#160;<span class="preprocessor">#define RDATA 0x12000000</span></div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="pru_8h.html#a68848df31fa7fe837400f0f49ab1b811">   80</a></span>&#160;<span class="preprocessor">#define RREG 0x20000000</span></div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="pru_8h.html#a2d3ec1e69b3e63db5c37c9b0ed6578cf">   81</a></span>&#160;<span class="preprocessor">#define WREG 0x40000000</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="pru_8h.html#a77ceac8d6af195fe72f95f6afd87c45e">   86</a></span>&#160;<span class="preprocessor">#define ID 0x00000000</span></div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="pru_8h.html#ae28dbf424985dc1c58ae7dbc5a0926b9">   87</a></span>&#160;<span class="preprocessor">#define CONFIG1 0x01000000</span></div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="pru_8h.html#a9989dac1034e36497f2f4f81613cab88">   88</a></span>&#160;<span class="preprocessor">#define CONFIG2 0x02000000</span></div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="pru_8h.html#a8d128687074c874210b0c9dada3d8ca7">   89</a></span>&#160;<span class="preprocessor">#define CONFIG3 0x03000000</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="pru_8h.html#a8fea370fa35eeb28355a58a40783ec99">   90</a></span>&#160;<span class="preprocessor">#define CH1SET 0x05000000</span></div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="pru_8h.html#a3e8ab2c505cc6f00a1807a151a9ebcdb">   91</a></span>&#160;<span class="preprocessor">#define CH2SET 0x06000000</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="pru_8h.html#a70dccc80e613cfc0eea471983aecc229">   92</a></span>&#160;<span class="preprocessor">#define CH3SET 0x07000000</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="pru_8h.html#a0d9979e6e1d8b4e7727063b2660ac10b">   93</a></span>&#160;<span class="preprocessor">#define CH4SET 0x08000000</span></div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="pru_8h.html#aff7800e91abe1001d9e3c9febc34e0d3">   94</a></span>&#160;<span class="preprocessor">#define CH5SET 0x09000000</span></div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="pru_8h.html#a4708b2ba51cdb3a41817f06b8982657f">   95</a></span>&#160;<span class="preprocessor">#define CH6SET 0x0A000000</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="pru_8h.html#a018ba15c7462bc82cae0c3695d4c0ed0">   96</a></span>&#160;<span class="preprocessor">#define CH7SET 0x0B000000</span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="pru_8h.html#a9e870ff4a991cadaab80c387e09b33de">   97</a></span>&#160;<span class="preprocessor">#define CH8SET 0x0C000000</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="pru_8h.html#ae4549ec8ad2b570fc4a3cce6a53c086a">  102</a></span>&#160;<span class="preprocessor">#define GAIN1 0x1000</span></div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="pru_8h.html#a447d200a726c25fd923af631584c5597">  103</a></span>&#160;<span class="preprocessor">#define GAIN2 0x2000</span></div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="pru_8h.html#a79a4aae7d33e9fd61c98eef99b6456c5">  104</a></span>&#160;<span class="preprocessor">#define GAIN12 0x6000</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="pru_8h.html#aadecb1977e30da2f62766f1fcb8b1f95">  109</a></span>&#160;<span class="preprocessor">#define K1 0x0600</span></div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="pru_8h.html#ab6d0e745059aded06587e4b6933bca0b">  110</a></span>&#160;<span class="preprocessor">#define K2 0x0500</span></div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="pru_8h.html#ab45eb721b96f7dc4898425c6bdc0ae49">  111</a></span>&#160;<span class="preprocessor">#define K4 0x0400</span></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="pru_8h.html#a66a8e71a3df40b69d3a5483c3cd972e0">  112</a></span>&#160;<span class="preprocessor">#define K8 0x0300</span></div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="pru_8h.html#a0c1b4ad6599de0f7b18674bf6c3a22fe">  113</a></span>&#160;<span class="preprocessor">#define K16 0x0200</span></div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="pru_8h.html#ad3d8f27a31684427b780e4d6466fd2a3">  114</a></span>&#160;<span class="preprocessor">#define K32 0x0100</span></div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="pru_8h.html#a9a4bd57068f054cec3fd02dbc65d2f5d">  115</a></span>&#160;<span class="preprocessor">#define K64 0x0000</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="pru_8h.html#a3c2a19f5e92f0c34ae9c541000cf72e9">  120</a></span>&#160;<span class="preprocessor">#define CONFIG1DEFAULT 0x9000</span></div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="pru_8h.html#a9a3d66f2569c682252d7a3213bad3fd3">  121</a></span>&#160;<span class="preprocessor">#define CONFIG2DEFAULT 0xE000</span></div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="pru_8h.html#a05874079216c802a325d9f7251b6e6d8">  122</a></span>&#160;<span class="preprocessor">#define CONFIG3DEFAULT 0xE800</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">// ------  FILES  ------ //</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="pru_8h.html#aa284ae96969e8487b1d1f03b6215a98c">  127</a></span>&#160;<span class="preprocessor">#define MMAP_FILE &quot;/sys/class/uio/uio0/maps/map1/&quot;</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#define PRU_CODE &quot;/lib/firmware/rocketlogger_spi.bin&quot;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// ------  PRU DEFINES  ------ //</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="pru_8h.html#a82da5e0788cd6c3833dc14640c2486d6">  137</a></span>&#160;<span class="preprocessor">#define PRECISION_HIGH 24</span></div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="pru_8h.html#a9986bad57c98d8a0d316444fc66de053">  138</a></span>&#160;<span class="preprocessor">#define PRECISION_LOW 16</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="pru_8h.html#a20aa8789c2514b7531aa0c80f0bd11a0">  143</a></span>&#160;<span class="preprocessor">#define SIZE_HIGH 4</span></div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="pru_8h.html#a4351e337504049556d7be2aad1547121">  144</a></span>&#160;<span class="preprocessor">#define SIZE_LOW 2</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="pru_8h.html#a71f773b581866e556ef1b082f9b50bbb">  147</a></span>&#160;<span class="preprocessor">#define VALID_MASK 0x1</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#define BINARY_MASK 0xE</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="pru_8h.html#a56f883236138dc4363750263a4739b30">  152</a></span>&#160;<span class="preprocessor">#define PRU_TIMEOUT 3</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077">  157</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077">pru_state</a> {</div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077aa1dc6393949d4482ff3e195bd85598f0">  158</a></span>&#160;    <a class="code" href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077aa1dc6393949d4482ff3e195bd85598f0">PRU_OFF</a> = 0,       </div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077a1b1bd13d3255a25810bfe9328cb00f33">  159</a></span>&#160;    <a class="code" href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077a1b1bd13d3255a25810bfe9328cb00f33">PRU_LIMIT</a> = 1,     </div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077a126d7c453b951c98cc537ef0a69082a5">  160</a></span>&#160;    <a class="code" href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077a126d7c453b951c98cc537ef0a69082a5">PRU_CONTINUOUS</a> = 3 </div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;} <a class="code" href="pru_8h.html#ac1d7cd733ef08a5dde1d84664788bfa5">rl_pru_state</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="pru_8h.html#a07a6f4f9ee069b2323f2fccafe018bd8">  164</a></span>&#160;<span class="preprocessor">#define NUMBER_ADC_COMMANDS 12</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="structpru__data__struct.html">  169</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpru__data__struct.html">pru_data_struct</a> {</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="structpru__data__struct.html#a9a124ab5c8c3af75e1ab43b678a2b211">  171</a></span>&#160;    <a class="code" href="pru_8h.html#ac1d7cd733ef08a5dde1d84664788bfa5">rl_pru_state</a> <a class="code" href="structpru__data__struct.html#a9a124ab5c8c3af75e1ab43b678a2b211">state</a>;</div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="structpru__data__struct.html#a37bf5ecf53ae32ec60d16618e3936fd8">  173</a></span>&#160;    uint32_t <a class="code" href="structpru__data__struct.html#a37bf5ecf53ae32ec60d16618e3936fd8">precision</a>;</div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="structpru__data__struct.html#a5e49060cde0f78e51f4c2a1eaf46fd01">  175</a></span>&#160;    uint32_t <a class="code" href="structpru__data__struct.html#a5e49060cde0f78e51f4c2a1eaf46fd01">sample_size</a>;</div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="structpru__data__struct.html#a009029f956cb377955c1710e25237362">  177</a></span>&#160;    uint32_t <a class="code" href="structpru__data__struct.html#a009029f956cb377955c1710e25237362">buffer0_location</a>;</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="structpru__data__struct.html#ab5654be612b10601bc48c878f512143a">  179</a></span>&#160;    uint32_t <a class="code" href="structpru__data__struct.html#ab5654be612b10601bc48c878f512143a">buffer1_location</a>;</div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="structpru__data__struct.html#ad74d154a959da4d358bb969605af3604">  181</a></span>&#160;    uint32_t <a class="code" href="structpru__data__struct.html#ad74d154a959da4d358bb969605af3604">buffer_size</a>;</div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="structpru__data__struct.html#a7d58cf74cf96a78347f4a63a5b92b56f">  183</a></span>&#160;    uint32_t <a class="code" href="structpru__data__struct.html#a7d58cf74cf96a78347f4a63a5b92b56f">sample_limit</a>;</div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="structpru__data__struct.html#a9b2b63675bd287b19168db44db53583c">  185</a></span>&#160;    uint32_t <a class="code" href="structpru__data__struct.html#a9b2b63675bd287b19168db44db53583c">number_commands</a>;</div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="structpru__data__struct.html#abc2bc058fcb806bc631307c857309b53">  187</a></span>&#160;    uint32_t <a class="code" href="structpru__data__struct.html#abc2bc058fcb806bc631307c857309b53">commands</a>[<a class="code" href="pru_8h.html#a07a6f4f9ee069b2323f2fccafe018bd8">NUMBER_ADC_COMMANDS</a>];</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;};</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">// ------  FUNCTIONS  ------ //</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keywordtype">void</span>* <a class="code" href="pru_8h.html#a8003e1ac7da2ee5ce28b70417f12ecd5">pru_wait_event</a>(<span class="keywordtype">void</span>* voidEvent);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keywordtype">int</span> <a class="code" href="pru_8h.html#a4d0ce3530455f19eaab044e35a461c4f">pru_wait_event_timeout</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> event, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timeout);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keywordtype">void</span> <a class="code" href="pru_8h.html#aca3acbd32d5951672e7b2b1523f3c2fa">pru_set_state</a>(<a class="code" href="pru_8h.html#ac1d7cd733ef08a5dde1d84664788bfa5">rl_pru_state</a> <a class="code" href="types_8h.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="keywordtype">int</span> <a class="code" href="pru_8h.html#ab784943bfd599f19fddb98647d2f253c">pru_init</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="keywordtype">int</span> <a class="code" href="pru_8h.html#a4707ea56eb19ed66966c1d92567b120c">pru_data_setup</a>(<span class="keyword">struct</span> <a class="code" href="structpru__data__struct.html">pru_data_struct</a>* pru, <span class="keyword">struct</span> <a class="code" href="structrl__conf.html">rl_conf</a>* conf,</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                   uint32_t avg_factor);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="keywordtype">int</span> <a class="code" href="pru_8h.html#a2429d8197f575e9610f73229d9a46de8">pru_sample</a>(FILE* data, FILE* ambient_file, <span class="keyword">struct</span> <a class="code" href="structrl__conf.html">rl_conf</a>* conf,</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;               <span class="keywordtype">char</span>* file_comment);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="keywordtype">void</span> <a class="code" href="pru_8h.html#ab2cde663e8bad29a264a7670f0e08511">pru_stop</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keywordtype">void</span> <a class="code" href="pru_8h.html#a307dd06bc7b81f70ae57e66aa9a6d2ca">pru_close</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* PRU_H_ */</span><span class="preprocessor"></span></div><div class="ttc" id="types_8h_html"><div class="ttname"><a href="types_8h.html">types.h</a></div></div>
<div class="ttc" id="pru_8h_html_a4d0ce3530455f19eaab044e35a461c4f"><div class="ttname"><a href="pru_8h.html#a4d0ce3530455f19eaab044e35a461c4f">pru_wait_event_timeout</a></div><div class="ttdeci">int pru_wait_event_timeout(unsigned int event, unsigned int timeout)</div><div class="ttdef"><b>Definition:</b> <a href="pru_8c_source.html#l00078">pru.c:78</a></div></div>
<div class="ttc" id="pru_8h_html_a20a140ced2d12dab5beb039c3bd78077"><div class="ttname"><a href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077">pru_state</a></div><div class="ttdeci">pru_state</div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00157">pru.h:157</a></div></div>
<div class="ttc" id="structpru__data__struct_html_a9a124ab5c8c3af75e1ab43b678a2b211"><div class="ttname"><a href="structpru__data__struct.html#a9a124ab5c8c3af75e1ab43b678a2b211">pru_data_struct::state</a></div><div class="ttdeci">rl_pru_state state</div><div class="ttdoc">Current PRU state. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00171">pru.h:171</a></div></div>
<div class="ttc" id="pru_8h_html_a07a6f4f9ee069b2323f2fccafe018bd8"><div class="ttname"><a href="pru_8h.html#a07a6f4f9ee069b2323f2fccafe018bd8">NUMBER_ADC_COMMANDS</a></div><div class="ttdeci">#define NUMBER_ADC_COMMANDS</div><div class="ttdoc">Number of ADC commands. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00164">pru.h:164</a></div></div>
<div class="ttc" id="meter_8h_html"><div class="ttname"><a href="meter_8h.html">meter.h</a></div></div>
<div class="ttc" id="pru_8h_html_a2429d8197f575e9610f73229d9a46de8"><div class="ttname"><a href="pru_8h.html#a2429d8197f575e9610f73229d9a46de8">pru_sample</a></div><div class="ttdeci">int pru_sample(FILE *data, FILE *ambient_file, struct rl_conf *conf, char *file_comment)</div><div class="ttdef"><b>Definition:</b> <a href="pru_8c_source.html#l00295">pru.c:295</a></div></div>
<div class="ttc" id="pru_8h_html_ac1d7cd733ef08a5dde1d84664788bfa5"><div class="ttname"><a href="pru_8h.html#ac1d7cd733ef08a5dde1d84664788bfa5">rl_pru_state</a></div><div class="ttdeci">enum pru_state rl_pru_state</div></div>
<div class="ttc" id="file__handling_8h_html"><div class="ttname"><a href="file__handling_8h.html">file_handling.h</a></div></div>
<div class="ttc" id="pru_8h_html_a20a140ced2d12dab5beb039c3bd78077a1b1bd13d3255a25810bfe9328cb00f33"><div class="ttname"><a href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077a1b1bd13d3255a25810bfe9328cb00f33">PRU_LIMIT</a></div><div class="ttdoc">Limited sampling mode. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00159">pru.h:159</a></div></div>
<div class="ttc" id="sem_8h_html"><div class="ttname"><a href="sem_8h.html">sem.h</a></div></div>
<div class="ttc" id="pru_8h_html_a20a140ced2d12dab5beb039c3bd78077a126d7c453b951c98cc537ef0a69082a5"><div class="ttname"><a href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077a126d7c453b951c98cc537ef0a69082a5">PRU_CONTINUOUS</a></div><div class="ttdoc">Continuous sampling mode. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00160">pru.h:160</a></div></div>
<div class="ttc" id="types_8h_html_adc6e5733fc3c22f0a7b2914188c49c90"><div class="ttname"><a href="types_8h.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a></div><div class="ttdeci">state</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00139">types.h:139</a></div></div>
<div class="ttc" id="web_8h_html"><div class="ttname"><a href="web_8h.html">web.h</a></div></div>
<div class="ttc" id="structpru__data__struct_html_ad74d154a959da4d358bb969605af3604"><div class="ttname"><a href="structpru__data__struct.html#ad74d154a959da4d358bb969605af3604">pru_data_struct::buffer_size</a></div><div class="ttdeci">uint32_t buffer_size</div><div class="ttdoc">Shared buffer size. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00181">pru.h:181</a></div></div>
<div class="ttc" id="structrl__conf_html"><div class="ttname"><a href="structrl__conf.html">rl_conf</a></div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00246">types.h:246</a></div></div>
<div class="ttc" id="structpru__data__struct_html_a9b2b63675bd287b19168db44db53583c"><div class="ttname"><a href="structpru__data__struct.html#a9b2b63675bd287b19168db44db53583c">pru_data_struct::number_commands</a></div><div class="ttdeci">uint32_t number_commands</div><div class="ttdoc">Number of ADC commands to send. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00185">pru.h:185</a></div></div>
<div class="ttc" id="pru_8h_html_a307dd06bc7b81f70ae57e66aa9a6d2ca"><div class="ttname"><a href="pru_8h.html#a307dd06bc7b81f70ae57e66aa9a6d2ca">pru_close</a></div><div class="ttdeci">void pru_close(void)</div><div class="ttdef"><b>Definition:</b> <a href="pru_8c_source.html#l00722">pru.c:722</a></div></div>
<div class="ttc" id="structpru__data__struct_html_a7d58cf74cf96a78347f4a63a5b92b56f"><div class="ttname"><a href="structpru__data__struct.html#a7d58cf74cf96a78347f4a63a5b92b56f">pru_data_struct::sample_limit</a></div><div class="ttdeci">uint32_t sample_limit</div><div class="ttdoc">Samples to take (0 for continuous) </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00183">pru.h:183</a></div></div>
<div class="ttc" id="util_8h_html"><div class="ttname"><a href="util_8h.html">util.h</a></div></div>
<div class="ttc" id="structpru__data__struct_html_a5e49060cde0f78e51f4c2a1eaf46fd01"><div class="ttname"><a href="structpru__data__struct.html#a5e49060cde0f78e51f4c2a1eaf46fd01">pru_data_struct::sample_size</a></div><div class="ttdeci">uint32_t sample_size</div><div class="ttdoc">Sample size in shared memory. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00175">pru.h:175</a></div></div>
<div class="ttc" id="pru_8h_html_a4707ea56eb19ed66966c1d92567b120c"><div class="ttname"><a href="pru_8h.html#a4707ea56eb19ed66966c1d92567b120c">pru_data_setup</a></div><div class="ttdeci">int pru_data_setup(struct pru_data_struct *pru, struct rl_conf *conf, uint32_t avg_factor)</div><div class="ttdef"><b>Definition:</b> <a href="pru_8c_source.html#l00188">pru.c:188</a></div></div>
<div class="ttc" id="structpru__data__struct_html"><div class="ttname"><a href="structpru__data__struct.html">pru_data_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00169">pru.h:169</a></div></div>
<div class="ttc" id="structpru__data__struct_html_a37bf5ecf53ae32ec60d16618e3936fd8"><div class="ttname"><a href="structpru__data__struct.html#a37bf5ecf53ae32ec60d16618e3936fd8">pru_data_struct::precision</a></div><div class="ttdeci">uint32_t precision</div><div class="ttdoc">ADC precision (in bit) </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00173">pru.h:173</a></div></div>
<div class="ttc" id="pru_8h_html_ab784943bfd599f19fddb98647d2f253c"><div class="ttname"><a href="pru_8h.html#ab784943bfd599f19fddb98647d2f253c">pru_init</a></div><div class="ttdeci">int pru_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="pru_8c_source.html#l00166">pru.c:166</a></div></div>
<div class="ttc" id="ambient_8h_html"><div class="ttname"><a href="ambient_8h.html">ambient.h</a></div></div>
<div class="ttc" id="calibration_8h_html"><div class="ttname"><a href="calibration_8h.html">calibration.h</a></div></div>
<div class="ttc" id="pru_8h_html_aca3acbd32d5951672e7b2b1523f3c2fa"><div class="ttname"><a href="pru_8h.html#aca3acbd32d5951672e7b2b1523f3c2fa">pru_set_state</a></div><div class="ttdeci">void pru_set_state(rl_pru_state state)</div><div class="ttdef"><b>Definition:</b> <a href="pru_8c_source.html#l00156">pru.c:156</a></div></div>
<div class="ttc" id="structpru__data__struct_html_a009029f956cb377955c1710e25237362"><div class="ttname"><a href="structpru__data__struct.html#a009029f956cb377955c1710e25237362">pru_data_struct::buffer0_location</a></div><div class="ttdeci">uint32_t buffer0_location</div><div class="ttdoc">Pointer to shared buffer 0. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00177">pru.h:177</a></div></div>
<div class="ttc" id="structpru__data__struct_html_ab5654be612b10601bc48c878f512143a"><div class="ttname"><a href="structpru__data__struct.html#ab5654be612b10601bc48c878f512143a">pru_data_struct::buffer1_location</a></div><div class="ttdeci">uint32_t buffer1_location</div><div class="ttdoc">Pointer to shared buffer 1. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00179">pru.h:179</a></div></div>
<div class="ttc" id="structpru__data__struct_html_abc2bc058fcb806bc631307c857309b53"><div class="ttname"><a href="structpru__data__struct.html#abc2bc058fcb806bc631307c857309b53">pru_data_struct::commands</a></div><div class="ttdeci">uint32_t commands[NUMBER_ADC_COMMANDS]</div><div class="ttdoc">ADC commands to send. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00187">pru.h:187</a></div></div>
<div class="ttc" id="pru_8h_html_a20a140ced2d12dab5beb039c3bd78077aa1dc6393949d4482ff3e195bd85598f0"><div class="ttname"><a href="pru_8h.html#a20a140ced2d12dab5beb039c3bd78077aa1dc6393949d4482ff3e195bd85598f0">PRU_OFF</a></div><div class="ttdoc">PRU off. </div><div class="ttdef"><b>Definition:</b> <a href="pru_8h_source.html#l00158">pru.h:158</a></div></div>
<div class="ttc" id="pru_8h_html_ab2cde663e8bad29a264a7670f0e08511"><div class="ttname"><a href="pru_8h.html#ab2cde663e8bad29a264a7670f0e08511">pru_stop</a></div><div class="ttdeci">void pru_stop(void)</div><div class="ttdef"><b>Definition:</b> <a href="pru_8c_source.html#l00707">pru.c:707</a></div></div>
<div class="ttc" id="log_8h_html"><div class="ttname"><a href="log_8h.html">log.h</a></div></div>
<div class="ttc" id="pru_8h_html_a8003e1ac7da2ee5ce28b70417f12ecd5"><div class="ttname"><a href="pru_8h.html#a8003e1ac7da2ee5ce28b70417f12ecd5">pru_wait_event</a></div><div class="ttdeci">void * pru_wait_event(void *voidEvent)</div><div class="ttdef"><b>Definition:</b> <a href="pru_8c_source.html#l00055">pru.c:55</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="pru_8h.html">pru.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
